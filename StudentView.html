<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>School — Home</title>

  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;line-height:1.4;background:#f6faf7;color:#0b2a1a}

    /* NAVBAR */
    .navbar{
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 20px;background:#fff;border-bottom:1px solid #e6f0ea;
      position:sticky;top:0;z-index:50;
    }
    .brand{display:flex;gap:12px;align-items:center}
    .brand .logo{
      width:40px;height:40px;border-radius:8px;
      background:linear-gradient(135deg,#3aa55a,#1f7a3b);
      display:flex;align-items:center;justify-content:center;
      color:#fff;font-weight:700;
    }
    .brand h1{font-size:16px}

    .nav-right{display:flex;gap:12px;align-items:center}

    .nav-links{display:flex;gap:12px;align-items:center}
    .nav-links a, .nav-links button.link-btn{
      padding:8px 12px;border-radius:8px;text-decoration:none;
      color:#0b2a1a;background:transparent;border:0;cursor:pointer;
    }
    .nav-links a:hover{background:#eef7ee}

    /* DROPDOWN (use classes so multiples work) */
    .dropdown{position:relative}
    .drop-toggle{
      display:flex;align-items:center;gap:6px;
      cursor:pointer;padding:8px 12px;border-radius:8px;
      background:transparent;border:0;
    }
    .drop-toggle:hover{background:#eef7ee}

    .caret{font-size:12px;color:#175a33}

    .drop-menu{
      position:absolute;top:calc(100% + 8px);left:0;
      min-width:200px;background:#fff;border-radius:8px;
      box-shadow:0 10px 30px rgba(6,30,15,.08);
      border:1px solid #e6f2ea;overflow:hidden;display:none;z-index:60;
    }
    .drop-menu.show{display:block}

    .drop-menu a{
      display:block;padding:10px 12px;text-decoration:none;
      color:#0b2a1a;border-bottom:1px solid #f0f6f3;
    }
    .drop-menu a:last-child{border-bottom:0}
    .drop-menu a:hover{background:#f6fff5}

    .btn{
      background:#2f8f3c;color:white;padding:8px 12px;
      border-radius:8px;border:0;cursor:pointer;
    }

    /* MOBILE */
    .hamburger{display:none;background:transparent;border:0;font-size:20px}
    @media (max-width:820px){
      .nav-links{
        display:none;position:absolute;right:12px;top:64px;
        flex-direction:column;background:#fff;padding:12px;
        border-radius:8px;box-shadow:0 6px 18px rgba(6,30,15,.06);
        min-width:220px;
      }
      .hamburger{display:block}
      .nav-links.show{display:flex}

      .drop-menu{
        position:static;box-shadow:none;border:0;padding:0;background:transparent;
      }
      .drop-menu a{
        background:#fff;border-radius:8px;margin-bottom:6px;border-bottom:0;
      }
    }

    /* REST OF YOUR PAGE STYLES */
    .container{max-width:900px;margin:26px auto;padding:0 18px;display:flex;flex-direction:column;gap:20px}
    .card{background:#fff;padding:16px;border-radius:12px;box-shadow:0 6px 20px rgba(6,30,15,.03);border:1px solid #e9f4ea}
    .card h2{font-size:18px;margin-bottom:10px}
    .card .sub{font-size:13px;color:#356c43;margin-bottom:12px}

    table{width:100%;border-collapse:collapse;font-size:14px}
    thead th{background:#f3fbf5;color:#16572f;text-align:left;padding:10px;border-bottom:2px solid #e6f2ea}
    tbody td{padding:10px;border-bottom:1px solid #f1f6f3}
    tbody tr:hover{background:#fbfffd}

    .actions button{margin-right:6px;padding:6px 8px;border-radius:8px;border:0;cursor:pointer}
    .edit{background:#fff;border:1px solid #cfe9d1}
    .delete{background:#ffecec;border:1px solid #ffd6d6}

    .timetable th,.timetable td{text-align:center}
    .time-col{width:90px}

    .row{display:flex;gap:12px;align-items:center}
    .search input{padding:8px 10px;border-radius:8px;border:1px solid #dcefe0}
    .small{font-size:13px;color:#55775a}
    .controls{display:flex;gap:10px;align-items:center}
    select{padding:8px;border-radius:8px;border:1px solid #dcefe0}
  </style>
</head>

<body>

   <!-- NAVBAR -->
  <nav class="navbar">
    <div class="brand">
      <div class="logo">S</div>
      <div>
        <h1> School</h1>
        <div class="small">Admin dashboard</div>
      </div>
    </div>

    <div class="row nav-right">
      <button class="hamburger" aria-label="menu" id="hamburger">☰</button>

      <div class="nav-links" id="navLinks">
        <!-- 1st dropdown -->
        <div class="dropdown">
          <button class="drop-toggle" aria-haspopup="true" aria-expanded="false">
            Students <span class="caret">▾</span>
          </button>
          <div class="drop-menu" role="menu">
            <a href="StudentReg.html">Students Registration</a>
            <a href="StudentView.html">Students View</a>
            <a href="attendance.html">Attendance</a>
          </div>
        </div>

        <!-- 2nd dropdown -->
        <div class="dropdown">
          <button class="drop-toggle" aria-haspopup="true" aria-expanded="false">
            Faculty <span class="caret">▾</span>
          </button>
          <div class="drop-menu" role="menu">
            <a href="faculty.html">Faculty Registration</a>
            <a href="leave.html">Leave Apply</a>
            <a href="leaveView.html">Leave View</a>
          </div>
        </div>

        <!-- 3rd dropdown -->
        <div class="dropdown">
          <button class="drop-toggle" aria-haspopup="true" aria-expanded="false">
            Time Table <span class="caret">▾</span>
          </button>
          <div class="drop-menu" role="menu">
            <a href="TimetableForm.html">Add Time Table</a>
            <a href="Timetableview.html">Timetable View</a>
          </div>
        </div>

        <button class="btn" onclick="location.href='index.html'">Logout</button>
      </div>
    </div>
  </nav>

  <!-- PAGE CONTENT (unchanged) -->
  <main class="container">
    <!-- STUDENTS TABLE -->
    <article class="card" id="students">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px">
        <div>
          <h2>Student Details</h2>
          <div class="sub">List of enrolled students and quick actions</div>
        </div>
        <div class="row">
          <div class="search"><input id="studentSearch" placeholder="Search by name or id" /></div>
        </div>
      </div>

      <div style="overflow:auto">
        <table id="studentsTable">
          <thead><tr>
            <th>ID</th><th>Name</th><th>Age</th><th>Grade</th><th>Email</th><th class="time-col">Actions</th>
          </tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </article>

   
  </main>

  <!-- SCRIPTS -->
  <script>
    /* ------------------------------
       MULTI-DROPDOWN FIX (works for any number)
       - hover on desktop
       - click toggles (mobile + desktop)
       - slight mouseleave delay
       - close on outside click or link click
    -------------------------------*/

    const hamburger = document.getElementById('hamburger');
    const navLinks = document.getElementById('navLinks');
    hamburger?.addEventListener('click', ()=> navLinks.classList.toggle('show'));

    // attach behavior to every dropdown
    document.querySelectorAll('.dropdown').forEach(drop => {
      const toggle = drop.querySelector('.drop-toggle');
      const menu = drop.querySelector('.drop-menu');
      let hideTimer = null;
      // hover open (desktop)
      drop.addEventListener('mouseenter', () => {
        if(window.innerWidth > 820) {
          clearTimeout(hideTimer);
          menu.classList.add('show');
          toggle.setAttribute('aria-expanded', 'true');
        }
      });
      // hover leave (desktop) with slight delay
      drop.addEventListener('mouseleave', () => {
        if(window.innerWidth > 820) {
          hideTimer = setTimeout(() => {
            menu.classList.remove('show');
            toggle.setAttribute('aria-expanded', 'false');
          }, 180);
        }
      });

      // click toggles the menu (works on mobile & desktop)
      toggle.addEventListener('click', (ev) => {
        ev.preventDefault();
        ev.stopPropagation();
        clearTimeout(hideTimer);
        const opened = menu.classList.toggle('show');
        toggle.setAttribute('aria-expanded', opened ? 'true' : 'false');
      });

      // close this menu if user clicks outside of it
      document.addEventListener('click', (e) => {
        if(!drop.contains(e.target)) {
          menu.classList.remove('show');
          toggle.setAttribute('aria-expanded', 'false');
        }
      });

      // when a link inside the menu is clicked: close mobile nav & this menu
      menu.querySelectorAll('a').forEach(a => {
        a.addEventListener('click', () => {
          if(window.innerWidth <= 820) navLinks.classList.remove('show');
          menu.classList.remove('show');
          toggle.setAttribute('aria-expanded', 'false');
        });
      });
    });

    /* -------------------------
       STUDENT + TIMETABLE JS
    --------------------------*/

    const students = [
      {id:'S001', name:'Aanya Sharma', age:14, grade:'9', email:'aanya@example.com'},
      {id:'S002', name:'Rahul Nair', age:15, grade:'10', email:'rahul@example.com'},
      {id:'S003', name:'Meera Joshi', age:13, grade:'8', email:'meera@example.com'},
      {id:'S004', name:'Karan Patel', age:16, grade:'11', email:'karan@example.com'},
    ];

    const studentsTbody = document.querySelector('#studentsTable tbody');
    function renderStudents(list){
      studentsTbody.innerHTML = '';
      list.forEach(s=>{
        studentsTbody.innerHTML += `
          <tr>
            <td>${s.id}</td>
            <td>${s.name}</td>
            <td>${s.age}</td>
            <td>${s.grade}</td>
            <td>${s.email}</td>
            <td class="actions time-col">
              <button class="edit" onclick="editStudent('${s.id}')">Edit</button>
              <button class="delete" onclick="deleteStudent('${s.id}')">Delete</button>
            </td>
          </tr>
        `;
      });
    }
    renderStudents(students);

    document.getElementById('studentSearch').addEventListener('input',(e)=>{
      const q = e.target.value.toLowerCase();
      const filtered = students.filter(s=> s.name.toLowerCase().includes(q) || s.id.toLowerCase().includes(q));
      renderStudents(q? filtered : students);
    });

    window.editStudent = function(id){
      const s = students.find(x=>x.id===id);
      const newName = prompt("Edit name:", s.name);
      if(newName){ s.name = newName; renderStudents(students); }
    }

    window.deleteStudent = function(id){
      if(confirm("Delete this student?")){
        const idx = students.findIndex(s=>s.id===id);
        students.splice(idx,1);
        renderStudents(students);
      }
    }

    const timetableData = {
      '8': [
        {time:'08:30 - 09:15', mon:'Math', tue:'Science', wed:'English', thu:'Social', fri:'PE'},
        {time:'09:20 - 10:05', mon:'English', tue:'Math', wed:'Art', thu:'Science', fri:'Music'},
        {time:'10:20 - 11:05', mon:'Computer', tue:'History', wed:'Math', thu:'English', fri:'Library'},
        {time:'11:10 - 11:55', mon:'Science', tue:'English', wed:'Social', thu:'Math', fri:'Assembly'}
      ]
    };

    const ttBody = document.getElementById('timetableBody');
    function renderTimetable(cls){
      ttBody.innerHTML = "";
      if(!cls || !timetableData[cls]){
        ttBody.innerHTML = `<tr><td class="time-col">--</td>
          <td colspan="5" class="small">Select a class to view timetable</td></tr>`;
        return;
      }

      timetableData[cls].forEach((row,idx)=>{
        ttBody.innerHTML += `
          <tr>
            <td class="time-col">${row.time}</td>
            <td>${row.mon}</td>
            <td>${row.tue}</td>
            <td>${row.wed}</td>
            <td>${row.thu}</td>
            <td>${row.fri}</td>
          </tr>
        `;
      });
    }

    document.getElementById('classSelect').addEventListener('change',e=>{
      renderTimetable(e.target.value);
    });

  </script>

</body>
</html>
